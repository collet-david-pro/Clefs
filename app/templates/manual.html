<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page_title }} - Gestionnaire de Clés</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

    {% include 'navbar.html' %}

    <main class="container" style="padding-top: 5rem;">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1>{{ page_title }}</h1>
        </div>

        <div class="accordion" id="manualAccordion">

            <div class="accordion-item">
                <h2 class="accordion-header" id="headingOne">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                        Étape 1 : Configurer l'environnement
                    </button>
                </h2>
                <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#manualAccordion">
                    <div class="accordion-body">
                        <p>La première chose à faire est de définir la structure de votre établissement.</p>
                        <ol>
                            <li>Cliquez sur l'onglet <strong>Configuration</strong> pour accéder au panneau d'administration.</li>
                            <li><strong>Créez vos Emprunteurs :</strong> Allez dans "Gérer les Emprunteurs" pour ajouter les personnes qui pourront emprunter des clés.</li>
                            <li><strong>Créez vos Bâtiments :</strong> Allez dans "Gérer les Bâtiments" et ajoutez les bâtiments que vous souhaitez gérer.</li>
                            <li><strong>Créez vos Points d'Accès :</strong> Allez dans "Gérer les Points d'Accès" pour ajouter les salles, portes, etc., en les liant à un bâtiment.</li>
                        </ol>
                        <p>Une fois ces étapes terminées, vous disposez d'une base de données prête pour la gestion des clés.</p>
                    </div>
                </div>
            </div>

            <div class="accordion-item">
                <h2 class="accordion-header" id="headingTwo">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                        Étape 2 : Ajouter et Gérer les Clés
                    </button>
                </h2>
                <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#manualAccordion">
                    <div class="accordion-body">
                        <p>Maintenant que vos points d'accès sont créés, vous pouvez ajouter les clés correspondantes.</p>
                        <ol>
                            <li>Depuis la page <strong>Configuration</strong>, cliquez sur "Gérer les Clés".</li>
                            <li>Remplissez le formulaire "Ajouter un type de clé" :</li>
                            <ul>
                                <li><strong>Numéro / Identifiant :</strong> Un nom unique pour ce type de clé (ex: PGP-A pour Passe Général Partiel Bâtiment A).</li>
                                <li><strong>Description :</strong> Une description claire de son usage.</li>
                                <li><strong>Quantité en Stock (Totale / Réserve) :</strong> Indiquez le nombre total d'exemplaires de cette clé, puis le nombre que vous souhaitez garder en réserve (non-disponible à l'emprunt). Le stock utilisable sera calculé automatiquement.</li>
                                <li><strong>Lieu de Stockage :</strong> Indiquez où ces clés sont physiquement rangées (ex: Accueil, Armoire 5...).</li>
                                <li><strong>Points d'accès autorisés :</strong> C'est l'étape la plus importante. Cochez dans la liste toutes les salles et portes que cette clé est autorisée à ouvrir.</li>
                            </ul>
                            <li>Cliquez sur "Ajouter la Clé".</li>
                            <li>Pour modifier une clé, cliquez sur le bouton <strong>Éditer</strong> dans la liste.</li>
                        </ol>
                    </div>
                </div>
            </div>

            <div class="accordion-item">
                <h2 class="accordion-header" id="headingThree">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                        Étape 3 : Gérer les Emprunts et Retours
                    </button>
                </h2>
                <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#manualAccordion">
                    <div class="accordion-body">
                        <h5>Pour emprunter une ou plusieurs clés :</h5>
                        <ol>
                            <li>Allez sur le <strong>Tableau de Bord</strong> et cliquez sur "Nouvel Emprunt".</li>
                            <li>Dans le formulaire, sélectionnez l'emprunteur.</li>
                            <li><strong>Cochez les cases</strong> correspondant à la ou les clé(s) à emprunter dans la liste.</li>
                            <li>Validez. Si une seule clé est empruntée, un PDF est généré. Sinon, vous retournez au tableau de bord.</li>
                        </ol>
                        <hr>
                        <h5>Pour retourner une clé :</h5>
                        <ol>
                            <li>Allez sur le <strong>Tableau de Bord</strong> ou dans l'onglet <strong>Emprunts en Cours</strong>.</li>
                            <li>Cliquez sur le bouton "Retourner" correspondant au type de clé que vous souhaitez enregistrer.</li>
                            <li>Si plusieurs personnes ont ce type de clé, une page vous demandera de sélectionner l'emprunt exact à clôturer. Cliquez sur "Confirmer le Retour".</li>
                        </ol>
                    </div>
                </div>
            </div>

            <div class="accordion-item">
                <h2 class="accordion-header" id="headingFour">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                        Consulter les Plans et les Emprunts
                    </button>
                </h2>
                <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#manualAccordion">
                    <div class="accordion-body">
                        <ul>
                            <li><strong>Plan de Clés :</strong> Cet onglet vous offre une vue matricielle. Utilisez les onglets "Vue par Clé" ou "Vue par Point d'Accès" pour répondre rapidement aux questions "Qui ouvre quoi ?" et "Qu'est-ce qui ouvre ici ?".</li>
                            <li><strong>Emprunts en Cours :</strong> Cet onglet vous montre, **groupé par personne**, qui a quelles clés en ce moment. C'est l'outil idéal pour un suivi rapide et pour réimprimer un bon de sortie si nécessaire.</li>
                        </ul>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
